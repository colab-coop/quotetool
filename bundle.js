!function(){var e=function(e,t){if(e)try{var n=document.querySelector(e);n&&n.scrollIntoView(t)}catch(i){}},t=function(e){if("undefined"==typeof document)throw new Error("document-ready only runs in the browser");var t=document.readyState;if("complete"===t||"interactive"===t)return setTimeout(e,0);document.addEventListener("DOMContentLoaded",(function(){e()}))},n="undefined"!=typeof window;function i(e){this.hasWindow=e,this.hasIdle=this.hasWindow&&window.requestIdleCallback,this.method=this.hasIdle?window.requestIdleCallback.bind(window):this.setTimeout,this.scheduled=!1,this.queue=[]}i.prototype.push=function(e){this.queue.push(e),this.schedule()},i.prototype.schedule=function(){if(!this.scheduled){this.scheduled=!0;var e=this;this.method((function(t){for(;e.queue.length&&t.timeRemaining()>0;)e.queue.shift()(t);e.scheduled=!1,e.queue.length&&e.schedule()}))}},i.prototype.setTimeout=function(e){setTimeout(e,0,{timeRemaining:function(){return 1}})};var r,o=function(){var e;return n?(window._nanoScheduler||(window._nanoScheduler=new i(!0)),e=window._nanoScheduler):e=new i,e}();s.disabled=!0;try{r=window.performance,s.disabled="true"===window.localStorage.DISABLE_NANOTIMING||!r.mark}catch(fe){}function s(e){if(s.disabled)return a;var t=(1e4*r.now()).toFixed()%Number.MAX_SAFE_INTEGER,n="start-"+t+"-"+e;function i(i){var s="end-"+t+"-"+e;r.mark(s),o.push((function(){var o=null;try{var a=e+" ["+t+"]";r.measure(a,n,s),r.clearMarks(n),r.clearMarks(s)}catch(fe){o=fe}i&&i(o,e)}))}return r.mark(n),i.uuid=t,i}function a(e){e&&o.push((function(){e(new Error("nanotiming: performance API unavailable"))}))}var h=s,l={};function u(){if(!(this instanceof u))return new u;this.trie={nodes:{}}}function d(e,t){return Object.prototype.hasOwnProperty.call(e,t)}l=u,u.prototype.create=function(e){var t=e.replace(/^\//,"").split("/");return function e(n,i){var r=d(t,n)&&t[n];if(!1===r)return i;var o=null;return/^:|^\*/.test(r)?(d(i.nodes,"$$")?o=i.nodes.$$:(o={nodes:{}},i.nodes.$$=o),"*"===r[0]&&(i.wildcard=!0),i.name=r.replace(/^:|^\*/,"")):d(i.nodes,r)?o=i.nodes[r]:(o={nodes:{}},i.nodes[r]=o),e(n+1,o)}(0,this.trie)},u.prototype.match=function(e){var t=e.replace(/^\//,"").split("/"),n={},i=function e(i,r){if(void 0!==r){var o=t[i];if(void 0===o)return r;if(d(r.nodes,o))return e(i+1,r.nodes[o]);if(r.name){try{n[r.name]=decodeURIComponent(o)}catch(fe){return e(i,void 0)}return e(i+1,r.nodes.$$)}if(r.wildcard){try{n.wildcard=decodeURIComponent(t.slice(i).join("/"))}catch(fe){return e(i,void 0)}return r.nodes.$$}return e(i+1)}}(0,this.trie);if(i)return(i=Object.assign({},i)).params=n,i},u.prototype.mount=function(e,t){var n=e.replace(/^\//,"").split("/"),i=null,r=null;if(1===n.length)r=n[0],i=this.create(r);else{var o=n.join("/");r=n[0],i=this.create(o)}Object.assign(i.nodes,t.nodes),t.name&&(i.name=t.name),i.nodes[""]&&(Object.keys(i.nodes[""]).forEach((function(e){"nodes"!==e&&(i[e]=i.nodes[""][e])})),Object.assign(i.nodes,i.nodes[""].nodes),delete i.nodes[""].nodes)};var c={},f=/file:\/\//.test("object"==typeof window&&window.location&&window.location.origin),p=new RegExp("^(file://|/)(.*.html?/?)?"),m=new RegExp("^(http(s)?(://))?(www.)?[a-zA-Z0-9-_.]+(:[0-9]{1,5})?(/{1})?"),g=new RegExp("#"),v=new RegExp("[?].*$");function y(e){if(!(this instanceof y))return new y(e);e=e||{},this.router=function e(t){if(!(this instanceof e))return new e(t);var n=(t||"").replace(/^\//,""),i=l();return r._trie=i,r.on=function(e,t){if(e=e||"/",t._wayfarer&&t._trie)i.mount(e,t._trie.trie);else{var n=i.create(e);n.cb=t,n.route=e}return r},r.emit=r,r.match=o,r._wayfarer=!0,r;function r(e){var t=o(e),n=new Array(arguments.length);n[0]=t.params;for(var i=1;i<n.length;i++)n[i]=arguments[i];return t.cb.apply(t.cb,n)}function o(e){var t=i.match(e);if(t&&t.cb)return new s(t);var r=i.match(n);if(r&&r.cb)return new s(r);throw new Error("route '"+e+"' did not match")}function s(e){this.cb=e.cb,this.route=e.route,this.params=e.params}}(e.default||"/404")}function _(e,t){return e=t?e.replace(p,""):e.replace(m,""),decodeURI(e.replace(v,"").replace(g,"/"))}c=y,y.prototype.on=function(e,t){e=e.replace(/^[#/]/,""),this.router.on(e,t)},y.prototype.emit=function(e){return e=_(e,f),this.router.emit(e)},y.prototype.match=function(e){return e=_(e,f),this.router.match(e)};function b(e,t){if(!e)throw new Error(t||"AssertionError")}b.notEqual=function(e,t,n){},b.notOk=function(e,t){},b.equal=function(e,t,n){},b.ok=b;var w=["onclick","ondblclick","onmousedown","onmouseup","onmouseover","onmousemove","onmouseout","onmouseenter","onmouseleave","ontouchcancel","ontouchend","ontouchmove","ontouchstart","ondragstart","ondrag","ondragenter","ondragleave","ondragover","ondrop","ondragend","onkeydown","onkeypress","onkeyup","onunload","onabort","onerror","onresize","onscroll","onselect","onchange","onsubmit","onreset","onfocus","onblur","oninput","onanimationend","onanimationiteration","onanimationstart","oncontextmenu","onfocusin","onfocusout"],k=w.length;function E(e,t,n){e[n]!==t[n]&&(t[n]=e[n],e[n]?t.setAttribute(n,""):t.removeAttribute(n))}function x(e,t){return t?e?e.isSameNode&&e.isSameNode(t)?t:e.tagName!==t.tagName||S(e)!==S(t)?e:(function(e,t){var n=e.nodeType,i=e.nodeName;1===n&&function(e,t){for(var n=t.attributes,i=e.attributes,r=null,o=null,s=null,a=null,h=i.length-1;h>=0;--h)s=(a=i[h]).name,r=a.namespaceURI,o=a.value,r?(s=a.localName||s,t.getAttributeNS(r,s)!==o&&t.setAttributeNS(r,s,o)):t.hasAttribute(s)?t.getAttribute(s)!==o&&("null"===o||"undefined"===o?t.removeAttribute(s):t.setAttribute(s,o)):t.setAttribute(s,o);for(var l=n.length-1;l>=0;--l)!1!==(a=n[l]).specified&&(s=a.name,(r=a.namespaceURI)?(s=a.localName||s,e.hasAttributeNS(r,s)||t.removeAttributeNS(r,s)):e.hasAttributeNS(null,s)||t.removeAttribute(s))}(e,t),3!==n&&8!==n||t.nodeValue!==e.nodeValue&&(t.nodeValue=e.nodeValue),"INPUT"===i?function(e,t){var n=e.value,i=t.value;E(e,t,"checked"),E(e,t,"disabled"),e.indeterminate!==t.indeterminate&&(t.indeterminate=e.indeterminate),"file"!==t.type&&(n!==i&&(t.setAttribute("value",n),t.value=n),"null"===n&&(t.value="",t.removeAttribute("value")),e.hasAttributeNS(null,"value")?"range"===t.type&&(t.value=n):t.removeAttribute("value"))}(e,t):"OPTION"===i?function(e,t){E(e,t,"selected")}(e,t):"TEXTAREA"===i&&function(e,t){var n=e.value;if(n!==t.value&&(t.value=n),t.firstChild&&t.firstChild.nodeValue!==n){if(""===n&&t.firstChild.nodeValue===t.placeholder)return;t.firstChild.nodeValue=n}}(e,t),function(e,t){for(var n=0;n<k;n++){var i=w[n];e[i]?t[i]=e[i]:t[i]&&(t[i]=void 0)}}(e,t)}(e,t),C(e,t),t):null:e}function S(e){return e.dataset?e.dataset.nanomorphComponentId:void 0}function C(e,t){for(var n,i,r,o,s=0,a=0;n=t.childNodes[a],i=e.childNodes[a-s],n||i;a++)if(i)if(n)if(A(i,n))(r=x(i,n))!==n&&(t.replaceChild(r,n),s++);else{o=null;for(var h=a;h<t.childNodes.length;h++)if(A(t.childNodes[h],i)){o=t.childNodes[h];break}o?((r=x(i,o))!==o&&s++,t.insertBefore(r,n)):i.id||n.id?(t.insertBefore(i,n),s++):(r=x(i,n))!==n&&(t.replaceChild(r,n),s++)}else t.appendChild(i),s++;else t.removeChild(n),a--}function A(e,t){return e.id?e.id===t.id:e.isSameNode?e.isSameNode(t):e.tagName===t.tagName&&3===e.type&&e.nodeValue===t.nodeValue}var T=function(e,t,n){return n&&n.childrenOnly?(C(t,e),e):x(t,e)},O=/([^?=&]+)(=([^&]*))?/g,R=/(noopener|noreferrer) (noopener|noreferrer)/,L=/^[\w-_]+:/,$={};function D(e){if(!(this instanceof D))return new D(e);this._name=e||"nanobus",this._starListeners=[],this._listeners={}}$=D,D.prototype.emit=function(e){for(var t=[],n=1,i=arguments.length;n<i;n++)t.push(arguments[n]);var r=h(this._name+"('"+e.toString()+"')"),o=this._listeners[e];return o&&o.length>0&&this._emit(this._listeners[e],t),this._starListeners.length>0&&this._emit(this._starListeners,e,t,r.uuid),r(),this},D.prototype.on=D.prototype.addListener=function(e,t){return"*"===e?this._starListeners.push(t):(this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t)),this},D.prototype.prependListener=function(e,t){return"*"===e?this._starListeners.unshift(t):(this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].unshift(t)),this},D.prototype.once=function(e,t){var n=this;return this.on(e,(function i(){t.apply(n,arguments),n.removeListener(e,i)})),this},D.prototype.prependOnceListener=function(e,t){var n=this;return this.prependListener(e,(function i(){t.apply(n,arguments),n.removeListener(e,i)})),this},D.prototype.removeListener=function(e,t){return"*"===e?(this._starListeners=this._starListeners.slice(),n(this._starListeners,t)):(void 0!==this._listeners[e]&&(this._listeners[e]=this._listeners[e].slice()),n(this._listeners[e],t));function n(e,t){if(e){var n=e.indexOf(t);return-1!==n?(function(e,t,n){var i,r=e.length;if(!(t>=r||0===n)){var o=r-(n=t+n>r?r-t:n);for(i=t;i<o;++i)e[i]=e[i+n];e.length=o}}(e,n,1),!0):void 0}}},D.prototype.removeAllListeners=function(e){return e?"*"===e?this._starListeners=[]:this._listeners[e]=[]:(this._starListeners=[],this._listeners={}),this},D.prototype.listeners=function(e){var t="*"!==e?this._listeners[e]:this._starListeners,n=[];if(t)for(var i=t.length,r=0;r<i;r++)n.push(t[r]);return n},D.prototype._emit=function(e,t,n,i){if(void 0!==e&&0!==e.length){void 0===n&&(n=t,t=null),t&&(n=void 0!==i?[t].concat(n,i):[t].concat(n));for(var r=e.length,o=0;o<r;o++){var s=e[o];s.apply(s,n)}}};var I={};function N(e){if(!(this instanceof N))return new N(e);"number"==typeof e&&(e={max:e}),e||(e={}),this.cache={},this.head=this.tail=null,this.length=0,this.max=e.max||1e3,this.maxAge=e.maxAge||0}I=N,Object.defineProperty(N.prototype,"keys",{get:function(){return Object.keys(this.cache)}}),N.prototype.clear=function(){this.cache={},this.head=this.tail=null,this.length=0},N.prototype.remove=function(e){if("string"!=typeof e&&(e=""+e),this.cache.hasOwnProperty(e)){var t=this.cache[e];return delete this.cache[e],this._unlink(e,t.prev,t.next),t.value}},N.prototype._unlink=function(e,t,n){this.length--,0===this.length?this.head=this.tail=null:this.head===e?(this.head=t,this.cache[this.head].next=null):this.tail===e?(this.tail=n,this.cache[this.tail].prev=null):(this.cache[t].next=n,this.cache[n].prev=t)},N.prototype.peek=function(e){if(this.cache.hasOwnProperty(e)){var t=this.cache[e];if(this._checkAge(e,t))return t.value}},N.prototype.set=function(e,t){var n;if("string"!=typeof e&&(e=""+e),this.cache.hasOwnProperty(e)){if((n=this.cache[e]).value=t,this.maxAge&&(n.modified=Date.now()),e===this.head)return t;this._unlink(e,n.prev,n.next)}else n={value:t,modified:0,next:null,prev:null},this.maxAge&&(n.modified=Date.now()),this.cache[e]=n,this.length===this.max&&this.evict();return this.length++,n.next=null,n.prev=this.head,this.head&&(this.cache[this.head].next=e),this.head=e,this.tail||(this.tail=e),t},N.prototype._checkAge=function(e,t){return!(this.maxAge&&Date.now()-t.modified>this.maxAge&&(this.remove(e),1))},N.prototype.get=function(e){if("string"!=typeof e&&(e=""+e),this.cache.hasOwnProperty(e)){var t=this.cache[e];if(this._checkAge(e,t))return this.head!==e&&(e===this.tail?(this.tail=t.next,this.cache[this.tail].prev=null):this.cache[t.prev].next=t.next,this.cache[t.next].prev=t.prev,this.cache[this.head].next=e,t.prev=this.head,t.next=null,this.head=e),t.value}},N.prototype.evict=function(){this.tail&&this.remove(this.tail)};var P={};function F(e,t,n){this.cache="number"==typeof n?new I(n):n||new I(100),this.state=e,this.emit=t}function M(e){return new(e.bind.apply(e,arguments))}P=F,F.prototype.render=function(e,t){var n=this.cache.get(t);if(!n){for(var i=[],r=2,o=arguments.length;r<o;r++)i.push(arguments[r]);i.unshift(e,t,this.state,this.emit),n=M.apply(M,i),this.cache.set(t,n)}return n};var j=B,q={};function B(e){var t=h("choo.constructor");if(!(this instanceof B))return new B(e);e=e||{};var n=this;this._events={DOMCONTENTLOADED:"DOMContentLoaded",DOMTITLECHANGE:"DOMTitleChange",REPLACESTATE:"replaceState",PUSHSTATE:"pushState",NAVIGATE:"navigate",POPSTATE:"popState",RENDER:"render"},this._historyEnabled=void 0===e.history||e.history,this._hrefEnabled=void 0===e.href||e.href,this._hashEnabled=void 0!==e.hash&&e.hash,this._hasWindow="undefined"!=typeof window,this._cache=e.cache,this._loaded=!1,this._stores=[function(e){n.emitter.prependListener(n._events.DOMTITLECHANGE,(function(t){e.title=t,n._hasWindow&&(document.title=t)}))}],this._tree=null;var i={events:this._events,components:{}};this._hasWindow?(this.state=window.initialState?Object.assign({},window.initialState,i):i,delete window.initialState):this.state=i,this.router=c({curry:!0}),this.emitter=$("choo.emit"),this.emit=this.emitter.emit.bind(this.emitter),this._hasWindow&&(this.state.title=document.title),t()}B.prototype.route=function(e,t){var n=h("choo.route('"+e+"')");this.router.on(e,t),n()},B.prototype.use=function(e){var t=this;this._stores.push((function(n){var i="choo.use";i=e.storeName?i+"("+e.storeName+")":i;var r=h(i);e(n,t.emitter,t),r()}))},B.prototype.start=function(){var n,i,r=h("choo.start"),o=this;return this._historyEnabled&&(this.emitter.prependListener(this._events.NAVIGATE,(function(){o._matchRoute(o.state),o._loaded&&(o.emitter.emit(o._events.RENDER),setTimeout(e.bind(null,window.location.hash),0))})),this.emitter.prependListener(this._events.POPSTATE,(function(){o.emitter.emit(o._events.NAVIGATE)})),this.emitter.prependListener(this._events.PUSHSTATE,(function(e){window.history.pushState(q,null,e),o.emitter.emit(o._events.NAVIGATE)})),this.emitter.prependListener(this._events.REPLACESTATE,(function(e){window.history.replaceState(q,null,e),o.emitter.emit(o._events.NAVIGATE)})),window.onpopstate=function(){o.emitter.emit(o._events.POPSTATE)},o._hrefEnabled&&(n=function(t){var n=t.href,i=t.hash;n!==window.location.href?o.emitter.emit(o._events.PUSHSTATE,n):!o._hashEnabled&&i&&e(i)},i=i||window.document,window.addEventListener("click",(function(e){if(!(e.button&&0!==e.button||e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||e.defaultPrevented)){var t=function e(t){if(t&&t!==i)return"a"!==t.localName||void 0===t.href?e(t.parentNode):t}(e.target);t&&(window.location.protocol!==t.protocol||window.location.hostname!==t.hostname||window.location.port!==t.port||t.hasAttribute("data-nanohref-ignore")||t.hasAttribute("download")||"_blank"===t.getAttribute("target")&&R.test(t.getAttribute("rel"))||L.test(t.getAttribute("href"))||(e.preventDefault(),n(t)))}})))),this._setCache(this.state),this._matchRoute(this.state),this._stores.forEach((function(e){e(o.state)})),this._tree=this._prerender(this.state),this.emitter.prependListener(o._events.RENDER,function(e,t){t||(t=window.requestAnimationFrame);var n=!1,i=null;return function(){null!==i||n||(n=!0,t((function(){n=!1;for(var t=i.length,r=new Array(t),o=0;o<t;o++)r[o]=i[o];e.apply(e,r),i=null}))),i=arguments}}((function(){var e=h("choo.render"),t=o._prerender(o.state),n=h("choo.morph");T(o._tree,t),n(),e()}))),t((function(){o.emitter.emit(o._events.DOMCONTENTLOADED),o._loaded=!0})),r(),this._tree},B.prototype.mount=function(e){var n=h("choo.mount('"+e+"')");if("object"!=typeof window)return this.selector=e,n(),this;var i=this;t((function(){var t=h("choo.render"),n=i.start();i._tree="string"==typeof e?document.querySelector(e):e;var r=h("choo.morph");T(i._tree,n),r(),t()})),n()},B.prototype.toString=function(e,t){(t=t||{}).components=t.components||{},t.events=Object.assign({},t.events,this._events),this._setCache(t),this._matchRoute(t,e),this.emitter.removeAllListeners(),this._stores.forEach((function(e){e(t)}));var n=this._prerender(t);return"string"==typeof n.outerHTML?n.outerHTML:n.toString()},B.prototype._matchRoute=function(e,t){var n,i;t?(n=t.replace(/\?.+$/,"").replace(/\/$/,""),this._hashEnabled||(n=n.replace(/#.+$/,"")),i=t):(n=window.location.pathname.replace(/\/$/,""),this._hashEnabled&&(n+=window.location.hash.replace(/^#/,"/")),i=window.location.search);var r,o=this.router.match(n);this._handler=o.cb,e.href=n,e.query=(r={},i.replace(/^.*\?/,"").replace(O,(function(e,t,n,i){var o=decodeURIComponent(i),s=decodeURIComponent(t);r.hasOwnProperty(s)?Array.isArray(r[s])?r[s].push(o):r[s]=[r[s],o]:r[s]=o})),r),e.route=o.route,e.params=o.params},B.prototype._prerender=function(e){var t=h("choo.prerender('"+e.route+"')"),n=this._handler(e,this.emit);return t(),n},B.prototype._setCache=function(e){var t=new P(e,this.emitter.emit.bind(this.emitter),this._cache);function n(e,n){for(var i=[],r=0,o=arguments.length;r<o;r++)i.push(arguments[r]);return t.render.apply(t,i)}e.cache=n,n.toJSON=function(){return null}};var z={class:"className",for:"htmlFor","http-equiv":"httpEquiv"};function U(e){return 9===e||10===e}var H,V=function(e,t){t||(t={});var n=t.concat||function(e,t){return String(e)+String(t)};return!1!==t.attrToProp&&(e=function(e){return function(t,n,i){for(var r in n)r in z&&(n[z[r]]=n[r],delete n[r]);return e(t,n,i)}}(e)),function(r){for(var o=1,s="",a=arguments.length,h=[],l=0;l<r.length;l++)if(l<a-1){var u=arguments[l+1],d=E(r[l]),c=o;10===c&&(c=8),9===c&&(c=8),7===c&&(c=8),4===c&&(c=5),2===c?"/"===s?(d.push([2,"/",u]),s=""):d.push([2,u]):13===c&&t.comments?s+=String(u):13!==c&&d.push([0,c,u]),h.push.apply(h,d)}else h.push.apply(h,E(r[l]));var f,p=[null,{},[]],m=[[p,-1]];for(l=0;l<h.length;l++){var g=m[m.length-1][0],v=(d=h[l])[0];if(2===v&&/^\//.test(d[1])){var y=m[m.length-1][1];m.length>1&&(m.pop(),m[m.length-1][0][2][y]=e(g[0],g[1],g[2].length?g[2]:void 0))}else if(2===v){var _=[d[1],{},[]];g[2].push(_),m.push([_,g[2].length-1])}else if(5===v||0===v&&5===d[1]){for(var b,w="";l<h.length;l++)if(5===h[l][0])w=n(w,h[l][1]);else{if(0!==h[l][0]||5!==h[l][1])break;if("object"!=typeof h[l][2]||w)w=n(w,h[l][2]);else for(b in h[l][2])h[l][2].hasOwnProperty(b)&&!g[1][b]&&(g[1][b]=h[l][2][b])}11===h[l][0]&&l++;for(var k=l;l<h.length;l++)if(8===h[l][0]||5===h[l][0])g[1][w]?""===h[l][1]||(g[1][w]=n(g[1][w],h[l][1])):g[1][w]=i(h[l][1]);else{if(0!==h[l][0]||8!==h[l][1]&&5!==h[l][1]){!w.length||g[1][w]||l!==k||3!==h[l][0]&&12!==h[l][0]||(g[1][w]=w.toLowerCase()),3===h[l][0]&&l--;break}g[1][w]?""===h[l][2]||(g[1][w]=n(g[1][w],h[l][2])):g[1][w]=i(h[l][2])}}else if(5===v)g[1][d[1]]=!0;else if(0===v&&5===d[1])g[1][d[2]]=!0;else if(3===v)f=g[0],G.test(f)&&m.length&&(y=m[m.length-1][1],m.pop(),m[m.length-1][0][2][y]=e(g[0],g[1],g[2].length?g[2]:void 0));else if(0===v&&1===d[1])void 0===d[2]||null===d[2]?d[2]="":d[2]||(d[2]=n("",d[2])),Array.isArray(d[2][0])?g[2].push.apply(g[2],d[2]):g[2].push(d[2]);else if(1===v)g[2].push(d[1]);else if(11!==v&&12!==v)throw new Error("unhandled: "+v)}if(p[2].length>1&&/^\s*$/.test(p[2][0])&&p[2].shift(),p[2].length>2||2===p[2].length&&/\S/.test(p[2][1])){if(t.createFragment)return t.createFragment(p[2]);throw new Error("multiple root elements must be wrapped in an enclosing tag")}return Array.isArray(p[2][0])&&"string"==typeof p[2][0][0]&&Array.isArray(p[2][0][2])&&(p[2][0]=e(p[2][0][0],p[2][0][1],p[2][0][2])),p[2][0];function E(e){var n=[];7===o&&(o=4);for(var i=0;i<e.length;i++){var r=e.charAt(i);1===o&&"<"===r?(s.length&&n.push([1,s]),s="",o=2):">"!==r||U(o)||13===o?13===o&&/-$/.test(s)&&"-"===r?(t.comments&&n.push([8,s.substr(0,s.length-1)]),s="",o=1):2===o&&/^!--$/.test(s)?(t.comments&&n.push([2,s],[5,"comment"],[11]),s=r,o=13):1===o||13===o?s+=r:2===o&&"/"===r&&s.length||(2===o&&/\s/.test(r)?(s.length&&n.push([2,s]),s="",o=4):2===o?s+=r:4===o&&/[^\s"'=/]/.test(r)?(o=5,s=r):4===o&&/\s/.test(r)?(s.length&&n.push([5,s]),n.push([12])):5===o&&/\s/.test(r)?(n.push([5,s]),s="",o=6):5===o&&"="===r?(n.push([5,s],[11]),s="",o=7):5===o?s+=r:6!==o&&4!==o||"="!==r?6!==o&&4!==o||/\s/.test(r)?7===o&&'"'===r?o=10:7===o&&"'"===r?o=9:10===o&&'"'===r||9===o&&"'"===r?(n.push([8,s],[12]),s="",o=4):7!==o||/\s/.test(r)?8===o&&/\s/.test(r)?(n.push([8,s],[12]),s="",o=4):8!==o&&9!==o&&10!==o||(s+=r):(o=8,i--):(n.push([12]),/[\w-]/.test(r)?(s+=r,o=5):o=4):(n.push([11]),o=7)):(2===o&&s.length?n.push([2,s]):5===o?n.push([5,s]):8===o&&s.length&&n.push([8,s]),n.push([3]),s="",o=1)}return 1===o&&s.length?(n.push([1,s]),s=""):8===o&&s.length||10===o&&s.length||9===o&&s.length?(n.push([8,s]),s=""):5===o&&(n.push([5,s]),s=""),n}};function i(e){return"function"==typeof e||"string"==typeof e||e&&"object"==typeof e||null==e?e:n("",e)}},G=RegExp("^("+["area","base","basefont","bgsound","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr","!--","animate","animateTransform","circle","cursor","desc","ellipse","feBlend","feColorMatrix","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","font-face-format","font-face-name","font-face-uri","glyph","glyphRef","hkern","image","line","missing-glyph","mpath","path","polygon","polyline","rect","set","stop","tref","use","view","vkern"].join("|")+")(?:[.#][a-zA-Z0-9\x7f-\uffff_:-]+)*$"),W=/\n[\s]+$/,Q=/^\n[\s]+/,K=/[\s]+$/,J=/^[\s]+/,X=/[\n\s]+/g,Z=["a","abbr","b","bdi","bdo","br","cite","data","dfn","em","i","kbd","mark","q","rp","rt","rtc","ruby","s","amp","small","span","strong","sub","sup","time","u","var","wbr"],Y=["code","pre","textarea"],ee=["svg","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],te=["async","autofocus","autoplay","checked","controls","default","defaultchecked","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","novalidate","open","playsinline","readonly","required","reversed","selected"],ne=["indeterminate"],ie=function(e){function t(t,n,i){var r;-1!==ee.indexOf(t)&&(n.namespace="http://www.w3.org/2000/svg");var o=!1;n.namespace&&(o=n.namespace,delete n.namespace);var s=!1;if(n.is&&(s=n.is,delete n.is),o)r=s?e.createElementNS(o,t,{is:s}):e.createElementNS(o,t);else{if("!--"===t)return e.createComment(n.comment);r=s?e.createElement(t,{is:s}):e.createElement(t)}for(var a in n)if(n.hasOwnProperty(a)){var h=a.toLowerCase(),l=n[a];if("classname"===h&&(h="class",a="class"),"htmlFor"===a&&(a="for"),-1!==te.indexOf(h))if("true"===String(l))l=h;else if("false"===String(l))continue;"on"===h.slice(0,2)||-1!==ne.indexOf(h)?r[a]=l:o?"xlink:href"===a?r.setAttributeNS("http://www.w3.org/1999/xlink",a,l):/^xmlns($|:)/i.test(a)||r.setAttributeNS(null,a,l):r.setAttribute(a,l)}return function e(t,n){if(Array.isArray(n))for(var i,r,o=t.nodeName.toLowerCase(),s=!1,a=0,h=n.length;a<h;a++){var l=n[a];if(Array.isArray(l))e(t,l);else{("number"==typeof l||"boolean"==typeof l||"function"==typeof l||l instanceof Date||l instanceof RegExp)&&(l=l.toString());var u=t.childNodes[t.childNodes.length-1];if("string"==typeof l)s=!0,u&&"#text"===u.nodeName?u.nodeValue+=l:(l=t.ownerDocument.createTextNode(l),t.appendChild(l),u=l),a===h-1&&(s=!1,-1===Z.indexOf(o)&&-1===Y.indexOf(o)?""===(i=u.nodeValue.replace(Q,"").replace(K,"").replace(W,"").replace(X," "))?t.removeChild(u):u.nodeValue=i:-1===Y.indexOf(o)&&(r=0===a?"":" ",i=u.nodeValue.replace(Q,r).replace(J," ").replace(K,"").replace(W,"").replace(X," "),u.nodeValue=i));else if(l&&l.nodeType){s&&(s=!1,-1===Z.indexOf(o)&&-1===Y.indexOf(o)?""===(i=u.nodeValue.replace(Q,"").replace(W," ").replace(X," "))?t.removeChild(u):u.nodeValue=i:-1===Y.indexOf(o)&&(i=u.nodeValue.replace(J," ").replace(Q,"").replace(W," ").replace(X," "),u.nodeValue=i));var d=l.nodeName;d&&(o=d.toLowerCase()),t.appendChild(l)}}}}(r,i),r}var n=V(t,{comments:!0,createFragment:function t(n){for(var i=e.createDocumentFragment(),r=0;r<n.length;r++)null!=n[r]&&(Array.isArray(n[r])?i.appendChild(t(n[r])):("string"==typeof n[r]&&(n[r]=e.createTextNode(n[r])),i.appendChild(n[r])));return i}});return n.default=n,n.createComment=t,n}(document),re={exports:{}};H=function e(){"use strict";var t="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:{},n=!t.document&&!!t.postMessage,i=n&&/blob:/i.test((t.location||{}).protocol),r={},o=0,s={parse:function(n,i){var a=(i=i||{}).dynamicTyping||!1;if(w(a)&&(i.dynamicTypingFunction=a,a={}),i.dynamicTyping=a,i.transform=!!w(i.transform)&&i.transform,i.worker&&s.WORKERS_SUPPORTED){var h=function(){if(!s.WORKERS_SUPPORTED)return!1;var n,i,a=(n=t.URL||t.webkitURL||null,i=e.toString(),s.BLOB_URL||(s.BLOB_URL=n.createObjectURL(new Blob(["(",i,")();"],{type:"text/javascript"})))),h=new t.Worker(a);return h.onmessage=g,h.id=o++,r[h.id]=h}();return h.userStep=i.step,h.userChunk=i.chunk,h.userComplete=i.complete,h.userError=i.error,i.step=w(i.step),i.chunk=w(i.chunk),i.complete=w(i.complete),i.error=w(i.error),delete i.worker,void h.postMessage({input:n,config:i,workerId:h.id})}var f=null;return s.NODE_STREAM_INPUT,"string"==typeof n?f=i.download?new l(i):new d(i):!0===n.readable&&w(n.read)&&w(n.on)?f=new c(i):(t.File&&n instanceof File||n instanceof Object)&&(f=new u(i)),f.stream(n)},unparse:function(e,t){var n=!1,i=!0,r=",",o="\r\n",a='"',h=a+a,l=!1,u=null,d=!1;!function(){if("object"==typeof t){if("string"!=typeof t.delimiter||s.BAD_DELIMITERS.filter((function(e){return-1!==t.delimiter.indexOf(e)})).length||(r=t.delimiter),("boolean"==typeof t.quotes||"function"==typeof t.quotes||Array.isArray(t.quotes))&&(n=t.quotes),"boolean"!=typeof t.skipEmptyLines&&"string"!=typeof t.skipEmptyLines||(l=t.skipEmptyLines),"string"==typeof t.newline&&(o=t.newline),"string"==typeof t.quoteChar&&(a=t.quoteChar),"boolean"==typeof t.header&&(i=t.header),Array.isArray(t.columns)){if(0===t.columns.length)throw new Error("Option columns is empty");u=t.columns}void 0!==t.escapeChar&&(h=t.escapeChar+a),"boolean"==typeof t.escapeFormulae&&(d=t.escapeFormulae)}}();var c=new RegExp(p(a),"g");if("string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return m(null,e,l);if("object"==typeof e[0])return m(u||f(e[0]),e,l)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:f(e.data[0])),Array.isArray(e.data[0])||"object"==typeof e.data[0]||(e.data=[e.data])),m(e.fields||[],e.data||[],l);throw new Error("Unable to serialize unrecognized input");function f(e){if("object"!=typeof e)return[];var t=[];for(var n in e)t.push(n);return t}function m(e,t,n){var s="";"string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t));var a=Array.isArray(e)&&0<e.length,h=!Array.isArray(t[0]);if(a&&i){for(var l=0;l<e.length;l++)0<l&&(s+=r),s+=g(e[l],l);0<t.length&&(s+=o)}for(var u=0;u<t.length;u++){var d=a?e.length:t[u].length,c=!1,f=a?0===Object.keys(t[u]).length:0===t[u].length;if(n&&!a&&(c="greedy"===n?""===t[u].join("").trim():1===t[u].length&&0===t[u][0].length),"greedy"===n&&a){for(var p=[],m=0;m<d;m++){var v=h?e[m]:m;p.push(t[u][v])}c=""===p.join("").trim()}if(!c){for(var y=0;y<d;y++){0<y&&!f&&(s+=r);var _=a&&h?e[y]:y;s+=g(t[u][_],y)}u<t.length-1&&(!n||0<d&&!f)&&(s+=o)}}return s}function g(e,t){if(null==e)return"";if(e.constructor===Date)return JSON.stringify(e).slice(1,25);!0===d&&"string"==typeof e&&null!==e.match(/^[=+\-@].*$/)&&(e="'"+e);var i=e.toString().replace(c,h);return"boolean"==typeof n&&n||"function"==typeof n&&n(e,t)||Array.isArray(n)&&n[t]||function(e,t){for(var n=0;n<t.length;n++)if(-1<e.indexOf(t[n]))return!0;return!1}(i,s.BAD_DELIMITERS)||-1<i.indexOf(r)||" "===i.charAt(0)||" "===i.charAt(i.length-1)?a+i+a:i}}};if(s.RECORD_SEP=String.fromCharCode(30),s.UNIT_SEP=String.fromCharCode(31),s.BYTE_ORDER_MARK="\ufeff",s.BAD_DELIMITERS=["\r","\n",'"',s.BYTE_ORDER_MARK],s.WORKERS_SUPPORTED=!n&&!!t.Worker,s.NODE_STREAM_INPUT=1,s.LocalChunkSize=10485760,s.RemoteChunkSize=5242880,s.DefaultDelimiter=",",s.Parser=m,s.ParserHandle=f,s.NetworkStreamer=l,s.FileStreamer=u,s.StringStreamer=d,s.ReadableStreamStreamer=c,t.jQuery){var a=t.jQuery;a.fn.parse=function(e){var n=e.config||{},i=[];return this.each((function(e){if("INPUT"!==a(this).prop("tagName").toUpperCase()||"file"!==a(this).attr("type").toLowerCase()||!t.FileReader||!this.files||0===this.files.length)return!0;for(var r=0;r<this.files.length;r++)i.push({file:this.files[r],inputElem:this,instanceConfig:a.extend({},n)})})),r(),this;function r(){if(0!==i.length){var t,n,r,h=i[0];if(w(e.before)){var l=e.before(h.file,h.inputElem);if("object"==typeof l){if("abort"===l.action)return t=h.file,n=h.inputElem,r=l.reason,void(w(e.error)&&e.error({name:"AbortError"},t,n,r));if("skip"===l.action)return void o();"object"==typeof l.config&&(h.instanceConfig=a.extend(h.instanceConfig,l.config))}else if("skip"===l)return void o()}var u=h.instanceConfig.complete;h.instanceConfig.complete=function(e){w(u)&&u(e,h.file,h.inputElem),o()},s.parse(h.file,h.instanceConfig)}else w(e.complete)&&e.complete()}function o(){i.splice(0,1),r()}}}function h(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(e){var t=_(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null),this._handle=new f(t),(this._handle.streamer=this)._config=t}.call(this,e),this.parseChunk=function(e,n){if(this.isFirstChunk&&w(this._config.beforeFirstChunk)){var r=this._config.beforeFirstChunk(e);void 0!==r&&(e=r)}this.isFirstChunk=!1,this._halted=!1;var o=this._partialLine+e;this._partialLine="";var a=this._handle.parse(o,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var h=a.meta.cursor;this._finished||(this._partialLine=o.substring(h-this._baseIndex),this._baseIndex=h),a&&a.data&&(this._rowCount+=a.data.length);var l=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(i)t.postMessage({results:a,workerId:s.WORKER_ID,finished:l});else if(w(this._config.chunk)&&!n){if(this._config.chunk(a,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);a=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(a.data),this._completeResults.errors=this._completeResults.errors.concat(a.errors),this._completeResults.meta=a.meta),this._completed||!l||!w(this._config.complete)||a&&a.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),l||a&&a.meta.paused||this._nextChunk(),a}this._halted=!0},this._sendError=function(e){w(this._config.error)?this._config.error(e):i&&this._config.error&&t.postMessage({workerId:s.WORKER_ID,error:e,finished:!1})}}function l(e){var t;(e=e||{}).chunkSize||(e.chunkSize=s.RemoteChunkSize),h.call(this,e),this._nextChunk=n?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),n||(t.onload=b(this._chunkLoaded,this),t.onerror=b(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!n),this._config.downloadRequestHeaders){var e=this._config.downloadRequestHeaders;for(var i in e)t.setRequestHeader(i,e[i])}if(this._config.chunkSize){var r=this._start+this._config.chunkSize-1;t.setRequestHeader("Range","bytes="+this._start+"-"+r)}try{t.send(this._config.downloadRequestBody)}catch(e){this._chunkError(e.message)}n&&0===t.status&&this._chunkError()}},this._chunkLoaded=function(){var e;4===t.readyState&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:t.responseText.length,this._finished=!this._config.chunkSize||this._start>=(null===(e=t.getResponseHeader("Content-Range"))?-1:parseInt(e.substring(e.lastIndexOf("/")+1))),this.parseChunk(t.responseText)))},this._chunkError=function(e){var n=t.statusText||e;this._sendError(new Error(n))}}function u(e){var t,n;(e=e||{}).chunkSize||(e.chunkSize=s.LocalChunkSize),h.call(this,e);var i="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,n=e.slice||e.webkitSlice||e.mozSlice,i?((t=new FileReader).onload=b(this._chunkLoaded,this),t.onerror=b(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input;if(this._config.chunkSize){var r=Math.min(this._start+this._config.chunkSize,this._input.size);e=n.call(e,this._start,r)}var o=t.readAsText(e,this._config.encoding);i||this._chunkLoaded({target:{result:o}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(t.error)}}function d(e){var t;h.call(this,e=e||{}),this.stream=function(e){return t=e,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var e,n=this._config.chunkSize;return n?(e=t.substring(0,n),t=t.substring(n)):(e=t,t=""),this._finished=!t,this.parseChunk(e)}}}function c(e){h.call(this,e=e||{});var t=[],n=!0,i=!1;this.pause=function(){h.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){h.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){i&&1===t.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):n=!0},this._streamData=b((function(e){try{t.push("string"==typeof e?e:e.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(e){this._streamError(e)}}),this),this._streamError=b((function(e){this._streamCleanUp(),this._sendError(e)}),this),this._streamEnd=b((function(){this._streamCleanUp(),i=!0,this._streamData("")}),this),this._streamCleanUp=b((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function f(e){var t,n,i,r=Math.pow(2,53),o=-r,a=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)(e[-+]?\d+)?\s*$/,h=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,l=this,u=0,d=0,c=!1,f=!1,g=[],v={data:[],errors:[],meta:{}};if(w(e.step)){var y=e.step;e.step=function(t){if(v=t,E())k();else{if(k(),0===v.data.length)return;u+=t.data.length,e.preview&&u>e.preview?n.abort():(v.data=v.data[0],y(v,l))}}}function b(t){return"greedy"===e.skipEmptyLines?""===t.join("").trim():1===t.length&&0===t[0].length}function k(){if(v&&i&&(S("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+s.DefaultDelimiter+"'"),i=!1),e.skipEmptyLines)for(var t=0;t<v.data.length;t++)b(v.data[t])&&v.data.splice(t--,1);return E()&&function(){if(v)if(Array.isArray(v.data[0])){for(var t=0;E()&&t<v.data.length;t++)v.data[t].forEach(n);v.data.splice(0,1)}else v.data.forEach(n);function n(t,n){w(e.transformHeader)&&(t=e.transformHeader(t,n)),g.push(t)}}(),function(){if(!v||!e.header&&!e.dynamicTyping&&!e.transform)return v;function t(t,n){var i,r=e.header?{}:[];for(i=0;i<t.length;i++){var o=i,s=t[i];e.header&&(o=i>=g.length?"__parsed_extra":g[i]),e.transform&&(s=e.transform(s,o)),s=x(o,s),"__parsed_extra"===o?(r[o]=r[o]||[],r[o].push(s)):r[o]=s}return e.header&&(i>g.length?S("FieldMismatch","TooManyFields","Too many fields: expected "+g.length+" fields but parsed "+i,d+n):i<g.length&&S("FieldMismatch","TooFewFields","Too few fields: expected "+g.length+" fields but parsed "+i,d+n)),r}var n=1;return!v.data.length||Array.isArray(v.data[0])?(v.data=v.data.map(t),n=v.data.length):v.data=t(v.data,0),e.header&&v.meta&&(v.meta.fields=g),d+=n,v}()}function E(){return e.header&&0===g.length}function x(t,n){return i=t,e.dynamicTypingFunction&&void 0===e.dynamicTyping[i]&&(e.dynamicTyping[i]=e.dynamicTypingFunction(i)),!0===(e.dynamicTyping[i]||e.dynamicTyping)?"true"===n||"TRUE"===n||"false"!==n&&"FALSE"!==n&&(function(e){if(a.test(e)){var t=parseFloat(e);if(o<t&&t<r)return!0}return!1}(n)?parseFloat(n):h.test(n)?new Date(n):""===n?null:n):n;var i}function S(e,t,n,i){var r={type:e,code:t,message:n};void 0!==i&&(r.row=i),v.errors.push(r)}this.parse=function(r,o,a){var h=e.quoteChar||'"';if(e.newline||(e.newline=function(e,t){e=e.substring(0,1048576);var n=new RegExp(p(t)+"([^]*?)"+p(t),"gm"),i=(e=e.replace(n,"")).split("\r"),r=e.split("\n"),o=1<r.length&&r[0].length<i[0].length;if(1===i.length||o)return"\n";for(var s=0,a=0;a<i.length;a++)"\n"===i[a][0]&&s++;return s>=i.length/2?"\r\n":"\r"}(r,h)),i=!1,e.delimiter)w(e.delimiter)&&(e.delimiter=e.delimiter(r),v.meta.delimiter=e.delimiter);else{var l=function(t,n,i,r,o){var a,h,l,u;o=o||[",","\t","|",";",s.RECORD_SEP,s.UNIT_SEP];for(var d=0;d<o.length;d++){var c=o[d],f=0,p=0,g=0;l=void 0;for(var v=new m({comments:r,delimiter:c,newline:n,preview:10}).parse(t),y=0;y<v.data.length;y++)if(i&&b(v.data[y]))g++;else{var _=v.data[y].length;p+=_,void 0!==l?0<_&&(f+=Math.abs(_-l),l=_):l=_}0<v.data.length&&(p/=v.data.length-g),(void 0===h||f<=h)&&(void 0===u||u<p)&&1.99<p&&(h=f,a=c,u=p)}return{successful:!!(e.delimiter=a),bestDelimiter:a}}(r,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess);l.successful?e.delimiter=l.bestDelimiter:(i=!0,e.delimiter=s.DefaultDelimiter),v.meta.delimiter=e.delimiter}var u=_(e);return e.preview&&e.header&&u.preview++,t=r,n=new m(u),v=n.parse(t,o,a),k(),c?{meta:{paused:!0}}:v||{meta:{paused:!1}}},this.paused=function(){return c},this.pause=function(){c=!0,n.abort(),t=w(e.chunk)?"":t.substring(n.getCharIndex())},this.resume=function(){l.streamer._halted?(c=!1,l.streamer.parseChunk(t,!0)):setTimeout(l.resume,3)},this.aborted=function(){return f},this.abort=function(){f=!0,n.abort(),v.meta.aborted=!0,w(e.complete)&&e.complete(v),t=""}}function p(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function m(e){var t,n=(e=e||{}).delimiter,i=e.newline,r=e.comments,o=e.step,a=e.preview,h=e.fastMode,l=t=void 0===e.quoteChar?'"':e.quoteChar;if(void 0!==e.escapeChar&&(l=e.escapeChar),("string"!=typeof n||-1<s.BAD_DELIMITERS.indexOf(n))&&(n=","),r===n)throw new Error("Comment character same as delimiter");!0===r?r="#":("string"!=typeof r||-1<s.BAD_DELIMITERS.indexOf(r))&&(r=!1),"\n"!==i&&"\r"!==i&&"\r\n"!==i&&(i="\n");var u=0,d=!1;this.parse=function(e,s,c){if("string"!=typeof e)throw new Error("Input must be a string");var f=e.length,m=n.length,g=i.length,v=r.length,y=w(o),_=[],b=[],k=[],E=u=0;if(!e)return F();if(h||!1!==h&&-1===e.indexOf(t)){for(var x=e.split(i),S=0;S<x.length;S++){if(k=x[S],u+=k.length,S!==x.length-1)u+=i.length;else if(c)return F();if(!r||k.substring(0,v)!==r){if(y){if(_=[],D(k.split(n)),M(),d)return F()}else D(k.split(n));if(a&&a<=S)return _=_.slice(0,a),F(!0)}}return F()}for(var C=e.indexOf(n,u),A=e.indexOf(i,u),T=new RegExp(p(l)+p(t),"g"),O=e.indexOf(t,u);;)if(e[u]!==t)if(r&&0===k.length&&e.substring(u,u+v)===r){if(-1===A)return F();u=A+g,A=e.indexOf(i,u),C=e.indexOf(n,u)}else{if(-1!==C&&(C<A||-1===A)){if(!(C<O)){k.push(e.substring(u,C)),u=C+m,C=e.indexOf(n,u);continue}var R=j(C,O,A);if(R&&void 0!==R.nextDelim){C=R.nextDelim,O=R.quoteSearch,k.push(e.substring(u,C)),u=C+m,C=e.indexOf(n,u);continue}}if(-1===A)break;if(k.push(e.substring(u,A)),P(A+g),y&&(M(),d))return F();if(a&&_.length>=a)return F(!0)}else for(O=u,u++;;){if(-1===(O=e.indexOf(t,O+1)))return c||b.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:_.length,index:u}),N();if(O===f-1)return N(e.substring(u,O).replace(T,t));if(t!==l||e[O+1]!==l){if(t===l||0===O||e[O-1]!==l){-1!==C&&C<O+1&&(C=e.indexOf(n,O+1)),-1!==A&&A<O+1&&(A=e.indexOf(i,O+1));var L=I(-1===A?C:Math.min(C,A));if(e[O+1+L]===n){k.push(e.substring(u,O).replace(T,t)),e[u=O+1+L+m]!==t&&(O=e.indexOf(t,u)),C=e.indexOf(n,u),A=e.indexOf(i,u);break}var $=I(A);if(e.substring(O+1+$,O+1+$+g)===i){if(k.push(e.substring(u,O).replace(T,t)),P(O+1+$+g),C=e.indexOf(n,u),O=e.indexOf(t,u),y&&(M(),d))return F();if(a&&_.length>=a)return F(!0);break}b.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:_.length,index:u}),O++}}else O++}return N();function D(e){_.push(e),E=u}function I(t){var n=0;if(-1!==t){var i=e.substring(O+1,t);i&&""===i.trim()&&(n=i.length)}return n}function N(t){return c||(void 0===t&&(t=e.substring(u)),k.push(t),u=f,D(k),y&&M()),F()}function P(t){u=t,D(k),k=[],A=e.indexOf(i,u)}function F(e){return{data:_,errors:b,meta:{delimiter:n,linebreak:i,aborted:d,truncated:!!e,cursor:E+(s||0)}}}function M(){o(F()),_=[],b=[]}function j(i,r,o){var s={nextDelim:void 0,quoteSearch:void 0},a=e.indexOf(t,r+1);if(r<i&&i<a&&(a<o||-1===o)){var h=e.indexOf(n,a);if(-1===h)return s;a<h&&(a=e.indexOf(t,a+1)),s=j(h,a,o)}else s={nextDelim:i,quoteSearch:r};return s}},this.abort=function(){d=!0},this.getCharIndex=function(){return u}}function g(e){var t=e.data,n=r[t.workerId],i=!1;if(t.error)n.userError(t.error,t.file);else if(t.results&&t.results.data){var o={abort:function(){i=!0,v(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:y,resume:y};if(w(n.userStep)){for(var s=0;s<t.results.data.length&&(n.userStep({data:t.results.data[s],errors:t.results.errors,meta:t.results.meta},o),!i);s++);delete t.results}else w(n.userChunk)&&(n.userChunk(t.results,o,t.file),delete t.results)}t.finished&&!i&&v(t.workerId,t.results)}function v(e,t){var n=r[e];w(n.userComplete)&&n.userComplete(t),n.terminate(),delete r[e]}function y(){throw new Error("Not implemented.")}function _(e){if("object"!=typeof e||null===e)return e;var t=Array.isArray(e)?[]:{};for(var n in e)t[n]=_(e[n]);return t}function b(e,t){return function(){e.apply(t,arguments)}}function w(e){return"function"==typeof e}return i&&(t.onmessage=function(e){var n=e.data;if(void 0===s.WORKER_ID&&n&&(s.WORKER_ID=n.workerId),"string"==typeof n.input)t.postMessage({workerId:s.WORKER_ID,results:s.parse(n.input,n.config),finished:!0});else if(t.File&&n.input instanceof File||n.input instanceof Object){var i=s.parse(n.input,n.config);i&&t.postMessage({workerId:s.WORKER_ID,results:i,finished:!0})}}),(l.prototype=Object.create(h.prototype)).constructor=l,(u.prototype=Object.create(h.prototype)).constructor=u,(d.prototype=Object.create(d.prototype)).constructor=d,(c.prototype=Object.create(h.prototype)).constructor=c,s},"function"==typeof define&&define.amd?define([],H):void 0!==re.exports?re.exports=H():this.Papa=H(),re=re.exports;var oe={matrixifyEmbellishments:function(e){let t,n=[],i="",r=[];for(let o=0;o<e.length;o++){let s=e[o].gs$cell;"Quantity"===s.$t&&"1"!==s.row&&(t=re.parse(i,{dynamicTyping:!0,skipEmptyLines:!0,header:!0}),n.push({matrix:t.data,info:{url:r[0],name:r[1],queryParams:r[2],compatibleProducts:r[3]}}),i="",r=[]),"1"===s.col&&"1"!==s.row&&(i=i.slice(0,-1)+"\n"),s.col<20?i=i+s.$t+",":r.push(s.$t)}return t=re.parse(i,{dynamicTyping:!0,skipEmptyLines:!0,header:!0}),n.push({matrix:t.data,info:{url:r[0],name:r[1],queryParams:r[2],compatibleProducts:r[3]}}),n},matrixifyProducts:function(e){let t,n=[],i="",r=[];for(let o=0;o<e.length;o++){let s=e[o].gs$cell;"Quantity"===s.$t&&"1"!==s.row&&(t=re.parse(i,{dynamicTyping:!0,skipEmptyLines:!0,header:!0}),n.push({matrix:t.data,info:{locations:r[0].split(",").map(e=>e.trim()),size:r[1],color:r[2],description:r[3],category:r[4],brand:r[5],sku:r[6],url:r[7]}}),i="",r=[]),"1"===s.col&&"1"!==s.row&&(i=i.slice(0,-1)+"\n"),s.col<3?i=i+s.$t+",":r.push(s.$t)}return t=re.parse(i,{dynamicTyping:!0,skipEmptyLines:!0,header:!0}),n.push({matrix:t.data,info:{locations:r[0].split(",").map(e=>e.trim()),size:r[1],color:r[2],description:r[3],category:r[4],brand:r[5],sku:r[6],url:r[7]}}),n}};const{jsPDF:se}=window.jspdf,{matrixifyEmbellishments:ae,matrixifyProducts:he}=oe,le=j();let ue={embellishments:[],"T-shirts":[],Totes:[],Hats:[]};const de=[ce({url:"https://spreadsheets.google.com/feeds/cells/1oJSXBPovD_5P0d5ZeRbMlsTHu8OMAl1OSFyL4-B-J0o/1/public/full?alt=json",name:"embellishments"}),ce({url:"https://spreadsheets.google.com/feeds/cells/1oJSXBPovD_5P0d5ZeRbMlsTHu8OMAl1OSFyL4-B-J0o/2/public/full?alt=json",name:"T-shirts"}),ce({url:"https://spreadsheets.google.com/feeds/cells/1oJSXBPovD_5P0d5ZeRbMlsTHu8OMAl1OSFyL4-B-J0o/3/public/full?alt=json",name:"Totes"}),ce({url:"https://spreadsheets.google.com/feeds/cells/1oJSXBPovD_5P0d5ZeRbMlsTHu8OMAl1OSFyL4-B-J0o/4/public/full?alt=json",name:"Hats"})];function ce(e){return fetch(e.url).then(e=>e.json()).then(t=>{"embellishments"===e.name?ue[e.name]=ae(t.feed.entry):ue[e.name]=he(t.feed.entry)})}Promise.all(de).then(()=>{le.mount(".quote_body")}),le.use((e,t)=>{e.data={embellishmentIndex:"nothing",embellishment:null,productType:"nothing",products:null,productCount:"nothing",Front:"nothing",Back:"nothing",Left:"nothing",Right:"nothing"},t.on("DOMContentLoaded",(function(){""!==e.query.technique&&(foundEmbellishment=ue.embellishments.find(t=>t.info.queryParams.split("=")[1]===e.query.technique),foundEmbellishment&&(e.data.embellishmentIndex=ue.embellishments.indexOf(foundEmbellishment),e.data.embellishment=foundEmbellishment,e.data.productType=foundEmbellishment.info.compatibleProducts.split(",")[0].trim(),e.data.products=ue[e.data.productType],t.emit("render")))}))}),le.route("*",(e,t)=>{const n=ie`
  <select name="product_type" oninput=${function(n){"nothing"===n.target.value&&(e.data.embellishmentIndex="nothing",e.data.embellishment=null,e.data.productType="nothing",e.data.products=null,e.data.productCount="nothing",e.data.Front="nothing",e.data.Back="nothing",e.data.Left="nothing",e.data.Right="nothing"),e.data.productType=n.target.value,e.data.products=ue[n.target.value],t("render")}}>
    <option value="nothing">
      Please select a product type
    </option>
    <option value="T-shirts" ${"T-shirts"==e.data.productType?"selected":""}>
      T-Shirts
    </option>
    <option value="Totes" ${"Totes"==e.data.productType?"selected":""}>
      Totes
    </option>
    <option value="Hats" ${"Hats"==e.data.productType?"selected":""}>
      Hats
    </option>
  </select>
  `,i=ue.embellishments.map((t,n)=>`\n    <option value="${n}" ${e.data.embellishmentIndex==n?"selected":""}>\n      ${t.info.name}\n    </option>\n    `),r=ie(i),o=ie`
  <select name="embellishment" oninput=${function(n){"nothing"===n.target.value&&(e.data.productCount="nothing"),e.data.Front="nothing",e.data.Back="nothing",e.data.Left="nothing",e.data.Right="nothing",e.data.embellishmentIndex="nothing"===n.target.value?"nothing":parseInt(n.target.value,10),e.data.embellishment=ue.embellishments[e.data.embellishmentIndex],t("render")}}>
    <option value="nothing" ${"nothing"==e.data.embellishmentIndex?"selected":""}>
      Please select an embellishment technique
    </option>
    ${r}
  </select>
  `,s=e.data.embellishment?ie`<a href="${e.data.embellishment.info.url}">View [${e.data.embellishment.info.name}]</a>`:"",a=e.data.embellishment?e.data.embellishment.matrix.map(t=>`\n  <option value="${t.Quantity}" ${e.data.productCount==t.Quantity?"selected":""}>\n  ${t.Quantity}\n  </option>\n  `):"",h=ie(a),l=e.data.embellishment?ie`
  <select name="product_count" oninput=${function(n){"nothing"===n.target.value&&(e.data.Front="nothing",e.data.Back="nothing",e.data.Left="nothing",e.data.Right="nothing"),e.data.productCount=n.target.value,t("render")}}>
    <option value="nothing">
      Please select number of ${e.data.productDescription}
    </option>
    ${h}
  </select>
  `:"";let u="";if(e.data.embellishment&&"nothing"!==e.data.productCount){const t=[e.data.Front,e.data.Back,e.data.Left,e.data.Right].filter(e=>"nothing"!=e).reduce((t,n)=>t+e.data.embellishment.matrix.find(t=>t.Quantity==parseInt(e.data.productCount,10))[n],0);let n="";const i=e.data.products.reduce((i,r,o)=>{const s=r.matrix.find(t=>t.Quantity==parseInt(e.data.productCount,10)).Price+t;return r.info.category!==n?i[n=r.info.category]=[ie`
        <tr class="category-row">
          <th headers="category" scope="rowgroup">
            ${n}
          </th>
          <td>-</td>
          <td>-</td>
          <td>-</td>
          <td>-</td>
          <td>-</td>
        </tr>
        <tr>
          <td>-</td>
          <td headers="size">
            ${r.info.size}
          </td>
          <td headers="link">
            <a href="${r.info.url}">${r.info.description}</a>
          </td>
          <td headers="colors">
            ${r.info.color}
          </td>
          <td headers="brand">
            ${r.info.brand}
          </td>
          <td headers="price">
            $${s.toFixed(2)}
          </td>
        </tr>
        `]:i[n].push(ie`
        <tr>
          <td>-</td>
          <td headers="size">
            ${r.info.size}
          </td>
          <td headers="link">
            <a href="${r.info.url}">${r.info.description}</a>
          </td>
          <td headers="colors">
            ${r.info.color}
          </td>
          <td headers="brand">
            ${r.info.brand}
          </td>
          <td headers="price">
            $${s.toFixed(2)}
          </td>
        </tr>
        `),i},{}),r=Object.keys(i).map(e=>ie`
      <tbody>
        ${i[e]}
      </tbody>
      `);u=ie`
    <table id="priceTable">
      <thead>
        <tr>
          <th id="category">
            Category
          </th>
          <th id="size">
            Size
          </th>
          <th id="link">
            Link
          </th>
          <th id="colors">
            Colors
          </th>
          <th id="brand">
            Brand
          </th>
          <th id="price">
            Price
          </th>
        </tr>
      </thead>
      ${r}
    </table>

    <button onclick=${function(){const t=document.getElementById("priceTable");let n=[];if(t&&t.children){for(let e=1;e<t.rows.length;e++){let i={};for(let n=0;n<t.rows[e].cells.length;n++)2!==n&&(i[t.rows[0].cells[n].innerHTML]=t.rows[e].cells[n].innerHTML);n.push(i)}let i=new Date,r=new se("p","mm","a4");r.setFontSize(20),r.text(`worX Printing Cooperative Quote [${i.toDateString()}]`,10,20),r.setFontSize(13),r.text(`${e.data.productType} count: ${e.data.productCount}`,10,30),r.text("Embellishment: "+e.data.embellishment.info.name,10,40),r.text("Printing locations:",10,50),r.text("Front: "+e.data.Front,10,60),r.text("Back: "+e.data.Back,10,70),r.text("Left: "+e.data.Left,10,80),r.text("Right: "+e.data.Right,10,90),r.table(10,100,n,[{name:"Category",align:"center",width:60},{name:"Size",align:"center",width:40},{name:"Colors",align:"center",width:40},{name:"Brand",align:"center",width:60},{name:"Price",align:"center",width:40}],{printHeaders:!0});let o=i.getMonth().toString().padStart(2,"0"),s=i.getDate().toString().padStart(2,"0"),a=i.getFullYear();r.save(`worX_Printing_Cooperative_quote_${o}${s}${a}.pdf`)}}}>Download PDF</button>
    `}const d="nothing"!==e.data.productCount?e.data.products[0].info.locations.map(t=>ie`
      <div class="form-select">
        <label for="location_${t}">${t}</label>
        ${function(t){return ie`
    <select name="location_${t}" data-location=${t} oninput=${m}>
      <option value="nothing">
        Please select ${t} printing
      </option>
      ${function(t){const n=Object.keys(e.data.embellishment.matrix[0]).map(n=>-1!=n.indexOf("Quantity")?null:`\n        <option value="${n}" ${e.data[t]==n?"selected":""}>\n          ${n}\n        </option>\n        `).filter(e=>null!=e);return ie(n)}(t)}
    </select>
    `}(t)}
      </div>
    `):"",c="nothing"!==e.data.productType?ie`
    <div class="form-select">
      <label for="embellishment">What type of printing do you want?</label>
      ${o}
      ${s}
    </div>
  `:"",f=e.data.embellishment?ie`
    <div class="form-select">
      <label for="product_count">How many ${e.data.productType} do you need?</label>
      ${l}
    </div>
  `:"",p="nothing"!==e.data.productCount?ie`
    <p>Select locations for printing:</p>
    <div class="form-group">
      ${d}
    </div>
  `:"";return ie`
  <div>
    <p class="center">You can adjust this criteria as much as you like and see live updates to the pricing below.</p>

    <br>

    <div class="form-select">
      <label for="product_type">What type of product do you want?</label>
      ${n}
    </div>

    ${c}

    ${f}

    ${p}

    ${u}
  </div>
  `;function m(n){printingLocation=n.target.dataset.location,e.data[printingLocation]=n.target.value,t("render")}})}();